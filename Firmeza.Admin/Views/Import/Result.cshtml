@model Firmeza.Infrastructure.Services.ImportLog

@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Resultado de Importación";
}

<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Resultado de Importación</h1>
</div>

<div class="row">
    <div class="col-md-10 offset-md-1">
        <!-- Resumen General -->
        <div class="card shadow mb-4">
            <div class="card-header @(Model.HasErrors ? "bg-warning" : "bg-success") text-white py-3">
                <h6 class="m-0 font-weight-bold">
                    @if (Model.HasErrors)
                    {
                        <i class="fas fa-exclamation-triangle"></i> <span>Importacion Completada con Advertencias</span>
                    }
                    else
                    {
                        <i class="fas fa-check-circle"></i> <span>Importacion Exitosa</span>
                    }
                </h6>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="mb-2">
                            <i class="fas fa-box" style="font-size: 2rem; color: #28a745;"></i>
                        </div>
                        <h5>Productos</h5>
                        <h3 class="text-success">@Model.ProductsImported</h3>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-2">
                            <i class="fas fa-users" style="font-size: 2rem; color: #17a2b8;"></i>
                        </div>
                        <h5>Clientes</h5>
                        <h3 class="text-info">@Model.ClientsImported</h3>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-2">
                            <i class="fas fa-receipt" style="font-size: 2rem; color: #ffc107;"></i>
                        </div>
                        <h5>Ventas</h5>
                        <h3 class="text-warning">@Model.SalesImported</h3>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-2">
                            <i class="fas fa-list-ul" style="font-size: 2rem; color: #6c757d;"></i>
                        </div>
                        <h5>Detalles</h5>
                        <h3 class="text-secondary">@Model.SaleDetailsImported</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Errores y Advertencias -->
        @if (Model.HasErrors)
        {
            <div class="card shadow mb-4">
                <div class="card-header bg-danger text-white py-3">
                    <h6 class="m-0 font-weight-bold">
                        <i class="fas fa-times-circle"></i> Errores y Advertencias
                    </h6>
                </div>
                <div class="card-body">
                    @foreach (var error in Model.Errors)
                    {
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>@error.EntityType:</strong> @error.Message
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }
                </div>
            </div>
        }

        <!-- Detalles de la Importación -->
        <div class="card shadow mb-4">
            <div class="card-header bg-primary text-white py-3">
                <h6 class="m-0 font-weight-bold">
                    <i class="fas fa-info-circle"></i> Detalles
                </h6>
            </div>
            <div class="card-body">
                <table class="table">
                    <tr>
                        <td><strong>Fecha de Importación:</strong></td>
                        <td>@Model.ImportDate.ToString("dd/MM/yyyy HH:mm:ss")</td>
                    </tr>
                    <tr>
                        <td><strong>Tiempo Total:</strong></td>
                        <td>@Model.TotalTime</td>
                    </tr>
                    <tr>
                        <td><strong>Estado:</strong></td>
                        <td>
                            @if (Model.HasErrors)
                            {
                                <span class="badge badge-warning">Con Advertencias</span>
                            }
                            else
                            {
                                <span class="badge badge-success">Exitosa</span>
                            }
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Botones de Acción -->
        <div class="mt-4 text-center">
            <a asp-action="Index" asp-controller="Import" class="btn btn-primary btn-lg">
                <i class="fas fa-upload"></i> Importar Otro Archivo
            </a>
            <a asp-action="Index" asp-controller="Home" class="btn btn-secondary btn-lg">
                <i class="fas fa-home"></i> Ir al Dashboard
            </a>
        </div>
    </div>
</div>